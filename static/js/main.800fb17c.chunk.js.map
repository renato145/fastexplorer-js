{"version":3,"sources":["Footer.js","components/Button.js","socket/RefreshPageButton.js","socket/SocketStatus.js","Navigation.js","socket/SocketFail.js","treestructure/icons.js","reducers/socketReducer.js","helpers/numpyReader.js","sagas/socketSaga.js","constants/serverEvents.js","treestructure/LayerTitle.js","treestructure/Tree.js","treestructure/utils.js","treestructure/TreeLayout.js","viewers/NpyImage.js","viewers/ImageInput.js","viewers/Heatmap.js","MainView.js","viewers/CanvasContainer.js","viewers/LossLandscape.js","App.js","reducers/rootReducer.js","sagas/rootSaga.js","index.js"],"names":["Footer","url","mail","className","href","target","twitter","github","Button","children","color","colorHover","props","reload","window","location","RefreshPageButton","text","onClick","SocketStatus","connect","state","status","socket","connectedBefore","Link","styled","NavLink","attrs","exact","activeClassName","Navigation","Navbar","collapseOnSelect","bg","expand","Toggle","aria-controls","Collapse","id","Nav","to","SocketFail","role","xmlns","viewBox","d","variant","size","MinusSquareO","PlusSquareO","CloseSquareO","socketSlice","createSlice","name","initialState","data","inputImage","heatmap","heatmaps","lossLandscape","reducers","socketConnected","socketClosed","socketReceiveData","action","payload","JSON","parse","socketInvalidEvent","type","console","error","socketReceiveImageInput","socketNoImageHeatmap","socketReceiveHeatmap","socketReceiveLossLandscape","socketError","msg","socketServerClosed","actions","socketReducer","reducer","dtypes","arrayConstructor","Uint8Array","Int8Array","Int32Array","Float32Array","Float64Array","str2json","x","replace","npyToUrl","blob","a","arrayBuffer","buffer","payloadBuffer","slice","npyBuffer","headerLength","DataView","getUint8","offsetBytes","textDecoder","TextDecoder","payloadContents","decode","hcontents","header","shape","descr","dataUrl","URL","createObjectURL","urlToArray","fetch","response","sendEvent","watchClient","watchServer","watchSocket","send_event","createAction","initWebSocket","eventChannel","emit","onopen","log","send","stringify","client","onmessage","event","onclose","END","onerror","err","Error","reason","close","all","takeLatest","socketChannel","take","put","WebSocket","call","fork","serverEvents","mapDispatch","LayerTitle","path","toString","Frame","Content","div","toggle","width","height","marginRight","cursor","verticalAlign","Tree","memo","level","parentPath","nodes","xtra","pathname","useState","open","isOpen","setOpen","previous","value","ref","useRef","useEffect","current","usePrevious","setWidth","setHeight","ro","useMemo","ResizeObserver","entries","entry","contentRect","element","observe","unobserve","useDimensions","viewHeight","useSpring","from","opacity","transform","Icon","style","map","node","i","key","TreeLayout","colors","Magma","interpolateMagma","RdBu","interpolateRdBu","Inferno","interpolateInferno","Warm","interpolateWarm","Cool","interpolateCool","Spectral","interpolateSpectral","Plasma","interpolatePlasma","Greys","interpolateGreys","Title","NpyImage","title","defaultCmap","channels","setChannels","cmap","setCmap","then","canvas","length","ctx","getContext","imageData","getImageData","idx","colorValue","r","b","g","channelPixels","putImageData","defaultValue","onChange","e","Object","keys","sort","ascending","background","ImageInput","Heatmap","MainView","Col","sm","Row","md","Container","CanvasContainer","measure","Mesh","meshRef","planeRef","shaderData","vertexShader","fragmentShader","uniforms","plane","max_z","forEach","o","vertices","z","verticesNeedUpdate","rotation-x","Math","PI","position-y","attach","args","side","DoubleSide","LossLandscape","useMeasure","polyfill","bounds","position","AppContent","isHome","useLocation","fluid","App","basename","rootReducer","combineReducers","rootSaga","sagaMiddleware","createSagaMiddleWare","middleware","getDefaultMiddleware","thunk","store","configureStore","run","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.800fb17c.chunk.js","sourcesContent":["import React from 'react';\n\nexport const Footer = ({ url }) => {\n  const mail = 'renato.hermoza@pucp.edu.pe';\n  const social = 'renato145';\n\n  return (\n    <footer className=\"tw-w-full tw-mt-10\">\n      <p className=\"tw-text-gray-600 tw-pl-4 tw-mb-0 tw-text-sm\">\n        Made by: Renato Hermoza, check the{' '}\n        <a href={`https://github.com/renato145/${url}`} target=\"_black\">\n          source code\n        </a>\n        .\n      </p>\n      <hr className=\"tw-mt-2\" />\n      <div className=\"tw-flex tw-flex-wrap tw-justify-center\">\n        <div className=\"tw-px-4\">\n          <a href={`mailto:${mail}`}>{mail}</a>\n        </div>\n        <div className=\"tw-px-4\">\n          <a href={`https://twitter.com/${social.twitter}`} target=\"_black\">\n            Twitter\n          </a>\n        </div>\n        <div className=\"tw-px-4\">\n          <a href={`https://github.com/${social.github}`} target=\"_black\">\n            GitHub\n          </a>\n        </div>\n        <div className=\"tw-px-4\">\n          <a href={`https://${social}.github.io`} target=\"_black\">\n            Blog\n          </a>\n        </div>\n      </div>\n    </footer>\n  );\n};\n","import React from 'react';\n\nexport const Button = ({ children, color='tw-bg-blue-600', colorHover='tw-bg-blue-800', ...props }) => (\n  <button\n    className={`${color} hover:${colorHover} tw-px-2 tw-py-1 tw-rounded tw-text-white tw-text-sm focus:tw-outline-none focus:tw-shadow-outline tw-transition tw-duration-150`}\n    {...props}\n  >\n    {children}\n  </button>\n);\n","import React from 'react';\nimport { Button } from '../components/Button';\n\nconst reload = () => window.location.reload(false);\n\nexport const RefreshPageButton = ({ text = 'refresh' }) => {\n  return (\n    <Button color=\"tw-bg-teal-500\" colorHover=\"tw-bg-teal-700\" onClick={reload}>\n      {text}\n    </Button>\n  );\n};\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { RefreshPageButton } from './RefreshPageButton';\n\nconst SocketStatusComponent = ({ status, connectedBefore }) => {\n  return (\n    <div>\n      <p>\n        Socket status: {status}{' '}\n        {status === 'closed' && connectedBefore && (\n          <RefreshPageButton />\n        )}\n      </p>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    status: state.socket.status,\n    connectedBefore: state.socket.connectedBefore,\n  };\n};\n\nexport const SocketStatus = connect(\n  mapStateToProps,\n  null\n)(SocketStatusComponent);\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { Navbar, Nav } from 'react-bootstrap';\nimport styled from 'styled-components';\n\nconst Link = styled(NavLink).attrs((props) => ({\n  exact: true,\n  className: 'nav-link',\n  activeClassName: 'active',\n}))``;\n\nexport const Navigation = () => {\n  return (\n    <Navbar collapseOnSelect bg=\"light\" expand=\"lg\">\n      <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n      <Navbar.Collapse id=\"basic-navbar-nav\">\n        <Nav className=\"mr-auto\">\n          <Link to={`/`}>\n            Home\n          </Link>\n          <Link to={`/loss_landscape`}>\n            Loss Landscape\n          </Link>\n        </Nav>\n      </Navbar.Collapse>\n    </Navbar>\n  );\n};\n","import React from 'react';\nimport { RefreshPageButton } from './RefreshPageButton';\n\nexport const SocketFail = () => {\n  return (\n    <div\n      className=\"tw-mx-4 tw-bg-teal-100 tw-border-t-4 tw-border-teal-500 tw-rounded-b tw-text-teal-800 tw-px-4 tw-py-3 tw-shadow-md\"\n      role=\"alert\"\n    >\n      <div className=\"tw-flex\">\n        <div className=\"tw-py-1\">\n          <svg\n            className=\"tw-fill-current tw-h-6 tw-w-6 tw-text-teal-500 tw-mr-4\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 20 20\"\n          >\n            <path d=\"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z\" />\n          </svg>\n        </div>\n        <div>\n          <p className=\"tw-font-bold tw-text-lg\">Socket is not connected</p>\n          <p>\n            This utility is helps you visualize information about{' '}\n            <a href=\"https://dev.fast.ai/\">fastai2</a> models. To use this, you\n            need to launch the server in python via{' '}\n            <a href=\"https://renato145.github.io/fastexplorer/\">fastexplorer</a>\n            .\n          </p>\n          <p>\n            Once you launch the server,{' '}\n            <RefreshPageButton variant=\"info\" size=\"sm\" /> this page.\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\n\nexport const MinusSquareO = (props) => (\n  <svg {...props} viewBox=\"64 -65 897 897\">\n    <g>\n      <path\n        d=\"M888 760v0v0v-753v0h-752v0v753v0h752zM888 832h-752q-30 0 -51 -21t-21 -51v-753q0 -29 21 -50.5t51 -21.5h753q29 0 50.5 21.5t21.5 50.5v753q0 30 -21.5 51t-51.5 21v0zM732 347h-442q-14 0 -25 10.5t-11 25.5v0q0 15 11 25.5t25 10.5h442q14 0 25 -10.5t11 -25.5v0\n  q0 -15 -11 -25.5t-25 -10.5z\"\n      />\n    </g>\n  </svg>\n);\n\nexport const PlusSquareO = (props) => (\n  <svg {...props} viewBox=\"64 -65 897 897\">\n    <g>\n      <path\n        d=\"M888 760v0v0v-753v0h-752v0v753v0h752zM888 832h-752q-30 0 -51 -21t-21 -51v-753q0 -29 21 -50.5t51 -21.5h753q29 0 50.5 21.5t21.5 50.5v753q0 30 -21.5 51t-51.5 21v0zM732 420h-184v183q0 15 -10.5 25.5t-25.5 10.5v0q-14 0 -25 -10.5t-11 -25.5v-183h-184\n  q-15 0 -25.5 -11t-10.5 -25v0q0 -15 10.5 -25.5t25.5 -10.5h184v-183q0 -15 11 -25.5t25 -10.5v0q15 0 25.5 10.5t10.5 25.5v183h184q15 0 25.5 10.5t10.5 25.5v0q0 14 -10.5 25t-25.5 11z\"\n      />\n    </g>\n  </svg>\n);\n\nexport const CloseSquareO = (props) => (\n  <svg {...props} viewBox=\"64 -65 897 897\">\n    <g>\n      <path\n        d=\"M717.5 589.5q-10.5 10.5 -25.5 10.5t-26 -10l-154 -155l-154 155q-11 10 -26 10t-25.5 -10.5t-10.5 -25.5t11 -25l154 -155l-154 -155q-11 -10 -11 -25t10.5 -25.5t25.5 -10.5t26 10l154 155l154 -155q11 -10 26 -10t25.5 10.5t10.5 25t-11 25.5l-154 155l154 155\n  q11 10 11 25t-10.5 25.5zM888 760v0v0v-753v0h-752v0v753v0h752zM888 832h-752q-30 0 -51 -21t-21 -51v-753q0 -29 21 -50.5t51 -21.5h753q29 0 50.5 21.5t21.5 50.5v753q0 30 -21.5 51t-51.5 21v0z\"\n      />\n    </g>\n  </svg>\n);\n","import { createSlice } from '@reduxjs/toolkit';\n\nconst socketSlice = createSlice({\n  name: 'socket',\n  initialState: {\n    status: 'waiting',\n    connectedBefore: false,\n    data: null,\n    inputImage: null,\n    heatmap: null,\n    heatmaps: [], // TODO (multiple heatmaps)\n    lossLandscape: null, // TODO (lock on server loading)\n  },\n  reducers: {\n    socketConnected(state) {\n      state.status = 'connected';\n      state.connectedBefore = true;\n    },\n    socketClosed(state) {\n      state.status = 'closed';\n    },\n    socketReceiveData(state, action) {\n      const { data } = action.payload;\n      state.data = JSON.parse(data);\n    },\n    socketInvalidEvent(state, action) {\n      const { type } = action.payload;\n      console.error('Type not recognized by server:', type);\n    },\n    socketReceiveImageInput(state, action) {\n      state.inputImage = action.payload;\n    },\n    socketNoImageHeatmap(state, action) {\n      console.error('Heatmap not valid.');\n    },\n    socketReceiveHeatmap(state, action) {\n      state.heatmap = action.payload;\n    },\n    socketReceiveLossLandscape(state, action) {\n      state.lossLandscape = action.payload;\n    },\n    socketError(state, action) {\n      const { msg } = action.payload;\n      console.error('Error:', msg)\n    },\n    socketServerClosed(state, action) {\n      const { msg } = action.payload;\n      console.error(msg);\n    },\n  },\n});\n\nexport const {\n  socketConnected,\n  socketClosed,\n  socketReceiveData,\n} = socketSlice.actions;\nexport const socketReducer = socketSlice.reducer;\n","// Based on https://github.com/aplbrain/npyjs\n\nconst dtypes = {\n  '<u1': {\n    name: 'uint8',\n    size: 8,\n    arrayConstructor: Uint8Array,\n  },\n  '|u1': {\n    name: 'uint8',\n    size: 8,\n    arrayConstructor: Uint8Array,\n  },\n  '|i1': {\n    name: 'int8',\n    size: 8,\n    arrayConstructor: Int8Array,\n  },\n  '<u4': {\n    name: 'uint32',\n    size: 32,\n    arrayConstructor: Int32Array,\n  },\n  '<i4': {\n    name: 'int32',\n    size: 32,\n    arrayConstructor: Int32Array,\n  },\n  //   '<u8': {\n  //     name: 'uint64',\n  //     size: 64,\n  //     arrayConstructor: BigUint64Array,\n  //   },\n  //   '<i8': {\n  //     name: 'int64',\n  //     size: 64,\n  //     arrayConstructor: BigInt64Array,\n  //   },\n  '<f4': {\n    name: 'float32',\n    size: 32,\n    arrayConstructor: Float32Array,\n  },\n  '<f8': {\n    name: 'float64',\n    size: 64,\n    arrayConstructor: Float64Array,\n  },\n};\n\nconst str2json = x => {\n  return JSON.parse(\n    x\n      .replace(/'/g, '\"')\n      .replace('False', 'false')\n      .replace('(', '[')\n      .replace(')', ']')\n      .replace(', }', '}')\n      .replace(',]', ']')\n    // .replace(/,*\\),*/g, ']')\n  );\n};\n\n\nexport const npyToUrl = async (blob) => {\n  const buffer = await blob.arrayBuffer();\n  const payloadBuffer = buffer.slice(0, 100);\n  const npyBuffer = buffer.slice(128);\n  const headerLength = new DataView(npyBuffer.slice(8, 10)).getUint8(0);\n  const offsetBytes = 128 + 10 + headerLength;\n\n  const textDecoder = new TextDecoder('utf-8');\n\n  const payloadContents = textDecoder.decode(new Uint8Array(payloadBuffer));\n\n  const hcontents = textDecoder.decode(\n    new Uint8Array(npyBuffer.slice(10, 10 + headerLength))\n  );\n\n  const payload = str2json(payloadContents);\n  const header = str2json(hcontents);\n\n  const { shape, descr } = header;\n  const dataUrl = URL.createObjectURL(blob.slice(offsetBytes));\n\n  return {\n    type: payload.type,\n    payload: {\n      dataUrl,\n      shape,\n      descr,\n      ...payload\n    },\n  };\n};\n\nexport const urlToArray = async ({ dataUrl, shape, descr }) => {\n  const url = new URL(dataUrl);\n  const response = await fetch(url);\n  const buffer = await response.arrayBuffer();\n  return {\n    data: new dtypes[descr]['arrayConstructor'](buffer),\n    shape: shape\n  }\n};\n","import { eventChannel, END } from 'redux-saga';\nimport {\n  all,\n  call,\n  take,\n  put,\n  takeLatest,\n  fork,\n} from 'redux-saga/effects';\nimport { socketConnected, socketClosed } from '../reducers/socketReducer';\nimport { createAction } from '@reduxjs/toolkit';\nimport { npyToUrl } from '../helpers/numpyReader';\n\nconst uri = 'ws://localhost:8000/ws';\n\nexport const send_event = createAction('socket/sendEvent');\n\nfunction initWebSocket(socket) {\n  return eventChannel((emit) => {\n    socket.onopen = () => {\n      emit(socketConnected());\n      console.log('WebSocket connected.');\n      socket.send(\n        JSON.stringify({ type: 'CONNECTED', payload: { client: 'web_client' } })\n      );\n    };\n\n    socket.onmessage = async (event) => {\n      const data = event.data;\n      const msg = typeof data === \"string\" ? JSON.parse(data) : await npyToUrl(data);\n      if (!msg.type) console.error('Invalid message from socket server', msg);\n      else {\n        console.log('Event from WebSocket: ', msg.type);\n        emit(msg);\n      }\n    };\n\n    socket.onclose = () => {\n      console.log('WebSocket closed.');\n      emit(socketClosed());\n      emit(END);\n    };\n\n    socket.onerror = (err) => {\n      emit(new Error(err.reason));\n    };\n\n    return () => socket.close();\n  });\n}\n\nfunction* sendEvent(socket, action) {\n  yield socket.send(JSON.stringify(action));\n}\n\nfunction* watchClient(socket) {\n  yield all([takeLatest(send_event, sendEvent, socket)]);\n}\n\nfunction* watchServer(socketChannel) {\n  while (true) {\n    try {\n      const payload = yield take(socketChannel);\n      yield put(payload);\n    } catch (err) {\n      console.error(err);\n    }\n  }\n}\n\nexport function* watchSocket() {\n  const socket = yield new WebSocket(uri);\n  const socketChannel = yield call(initWebSocket, socket);\n  yield fork(watchClient, socket);\n  yield fork(watchServer, socketChannel);\n}\n","export const serverEvents = {\n  LOAD_INPUT: 'LOAD_INPUT',\n  GET_HEATMAP: 'GET_HEATMAP',\n  GET_LOSS_LANDSCAPE: 'GET_LOSS_LANDSCAPE',\n}\n\n// TODO: connection status constants\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { send_event } from '../sagas/socketSaga';\nimport { serverEvents } from '../constants/serverEvents';\n\nconst mapDispatch = { send_event };\n\nconst LayerTitleComponent = ({ name, shape, path, send_event }) => {\n  return (\n    <span\n      className=\"tw-align-middle tw-cursor-pointer\"\n      onClick={() =>\n        send_event({ event: serverEvents.GET_HEATMAP, path: path })\n      }\n    >\n      {name}\n      {shape ? ` [${shape.toString()}]` : ''}\n    </span>\n  );\n};\n\nexport const LayerTitle = connect(null, mapDispatch)(LayerTitleComponent);\n","import React, { memo, useState } from 'react';\nimport styled from 'styled-components';\nimport { useSpring, a } from 'react-spring';\nimport { usePrevious, useDimensions } from './utils';\nimport { MinusSquareO, PlusSquareO, CloseSquareO } from './icons';\nimport { LayerTitle } from './LayerTitle';\n\nconst Frame = styled('div')`\n  position: relative;\n  padding: 4px 0px 0px 0px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow-x: hidden;\n  vertical-align: middle;\n`;\n\nconst Content = styled(a.div)`\n  margin-left: 6px;\n  padding: 0px 0px 0px 14px;\n  border-left: 2px dashed rgba(0, 0, 0, 0.25);\n  overflow: hidden;\n`;\n\nconst toggle = {\n  width: '1em',\n  height: '1em',\n  marginRight: 10,\n  cursor: 'pointer',\n  verticalAlign: 'middle',\n};\n\nexport const Tree = memo(({ data, level, parentPath }) => {\n  const { name, nodes } = data;\n  const shape = data?.xtra?.shape;\n  const pathname = data?.xtra?.path;\n  const path = parentPath ? `${parentPath}/${pathname}` : pathname;\n  const [isOpen, setOpen] = useState(data?.xtra?.open);\n  const previous = usePrevious(isOpen);\n  const { ref, height: viewHeight } = useDimensions();\n  const { height, opacity, transform } = useSpring({\n    from: { height: 0, opacity: 0, transform: 'translate3d(20px,0,0)' },\n    to: {\n      height: isOpen ? viewHeight : 0,\n      opacity: isOpen ? 1 : 0,\n      transform: `translate3d(${isOpen ? 0 : 20}px,0,0)`,\n    },\n  });\n  const Icon = nodes ? (isOpen ? MinusSquareO : PlusSquareO) : CloseSquareO;\n\n  return (\n    <Frame>\n      <Icon\n        className=\"tw-inline-block\"\n        style={{ ...toggle, opacity: nodes ? 1 : 0.3 }}\n        onClick={() => setOpen(!isOpen)}\n      />\n      <LayerTitle name={name} shape={shape} path={path} />\n      <Content\n        style={{\n          opacity,\n          height: isOpen && previous === isOpen ? 'auto' : height,\n        }}\n      >\n        <a.div\n          ref={ref}\n          style={{ transform }}\n          children={\n            nodes &&\n            nodes.map((node, i) => (\n              <Tree key={i} data={node} level={level + 1} parentPath={path} />\n            ))\n          }\n        />\n      </Content>\n    </Frame>\n  );\n});\n","import { useRef, useEffect, useState, useMemo } from 'react';\nimport { ResizeObserver } from '@juggle/resize-observer';\n\nexport const usePrevious = (value) => {\n  const ref = useRef();\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n\n  return ref.current;\n};\n\nexport const useDimensions = () => {\n  const ref = useRef();\n  const [width, setWidth] = useState(0);\n  const [height, setHeight] = useState(0);\n\n  const ro = useMemo(\n    () =>\n      new ResizeObserver((entries) => {\n        const entry = entries[0];\n        setWidth(entry.contentRect.width);\n        setHeight(entry.contentRect.height);\n      }),\n    []\n  );\n\n  useEffect(() => {\n    const element = ref.current;\n    if (element) ro.observe(element);\n    return () => ro.unobserve(element);\n  }, [ro]);\n\n  return { ref, width, height };\n};\n","import React from 'react';\nimport { Tree } from './Tree';\n\nexport const TreeLayout = ({ data }) => {\n  return <Tree data={data} level={0} parentPath=\"\" />;\n};\n","import React, { useEffect, useRef, useState } from 'react';\nimport { urlToArray } from '../helpers/numpyReader';\nimport styled from 'styled-components';\nimport {\n  color,\n  ascending,\n  interpolateRdBu,\n  interpolateMagma,\n  interpolateInferno,\n  interpolateWarm,\n  interpolateCool,\n  interpolateSpectral,\n  interpolatePlasma,\n  interpolateGreys,\n} from 'd3';\n\nconst colors = {\n  Magma: interpolateMagma,\n  RdBu: interpolateRdBu,\n  Inferno: interpolateInferno,\n  Warm: interpolateWarm,\n  Cool: interpolateCool,\n  Spectral: interpolateSpectral,\n  Plasma: interpolatePlasma,\n  Greys: interpolateGreys,\n};\n\nconst Title = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.2em 0em;\n`;\n\nexport const NpyImage = ({ url, title, defaultCmap = 'RdBu' }) => {\n  const ref = useRef();\n  const [channels, setChannels] = useState();\n  const [cmap, setCmap] = useState(defaultCmap);\n\n  useEffect(() => {\n    if (!url) return;\n    urlToArray(url).then(({ data, shape }) => {\n      const canvas = ref.current;\n      const [channels, height, width] =\n        shape.length === 3 ? shape : [1, ...shape];\n      setChannels(channels);\n      const ctx = canvas.getContext('2d');\n      canvas.width = width;\n      canvas.height = height;\n      const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      const d = imageData.data;\n\n      if (channels === 1) {\n        for (let i = 0; i < d.length / 4; i++) {\n          const idx = i * 4;\n          const colorValue = color(colors[cmap](data[i]));\n          d[idx] = colorValue.r;\n          d[idx + 1] = colorValue.b;\n          d[idx + 2] = colorValue.g;\n          d[idx + 3] = 255;\n        }\n      } else {\n        const channelPixels = width * height;\n        for (let i = 0; i < d.length / 4; i++) {\n          const idx = i * 4;\n          d[idx] = data[i] * 255;\n          d[idx + 1] = data[i + channelPixels] * 255;\n          d[idx + 2] = data[i + channelPixels * 2] * 255;\n          d[idx + 3] = 255;\n        }\n      }\n\n      ctx.putImageData(imageData, 0, 0);\n    });\n  }, [url, cmap]);\n\n  return (\n    <>\n      <Title>\n        <div className=\"tw-ml-1 tw-font-medium tw-text-gray-900\">{title}</div>\n        {channels === 1 && (\n          <div>\n            <select\n              className=\"tw-px-2 tw-h-auto tw-text-xs tw-bg-white tw-border-gray-400 tw-border tw-rounded-sm focus:tw-outline-none\"\n              defaultValue={cmap}\n              onChange={(e) => setCmap(e.target.value)}\n            >\n              {Object.keys(colors).sort(ascending).map((d) => (\n                <option key={d} value={d} className=\"tw-py-2\">\n                  {d}\n                </option>\n              ))}\n            </select>\n          </div>\n        )}\n      </Title>\n      <canvas ref={ref} style={{ width: '100%', background: '#eee' }} />\n    </>\n  );\n};\n","import React from 'react';\nimport { Button } from '../components/Button';\nimport { connect } from 'react-redux';\nimport { send_event } from '../sagas/socketSaga';\nimport { serverEvents } from '../constants/serverEvents';\nimport { NpyImage } from './NpyImage';\n\nconst mapDispatch = { send_event };\n\nconst mapStateToProps = (state) => ({\n  inputImage: state.socket.inputImage,\n});\n\nexport const ImageInputComponent = ({ inputImage, send_event }) => {\n  return (\n    <>\n      <NpyImage url={inputImage} title=\"Input image\" />\n      <div className=\"tw-text-right tw-mt-1 tw-mr-1\">\n        <Button\n          onClick={() => send_event({ event: serverEvents.LOAD_INPUT })}\n        >\n          Load Input\n        </Button>\n      </div>\n    </>\n  );\n};\n\nexport const ImageInput = connect(\n  mapStateToProps,\n  mapDispatch\n)(ImageInputComponent);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { NpyImage } from './NpyImage';\n\nconst mapStateToProps = (state) => ({\n  heatmap: state.socket.heatmap,\n});\n\nexport const HeatmapComponent = ({ heatmap }) => {\n  return <NpyImage url={heatmap} title=\"Heatmap\" />;\n};\n\nexport const Heatmap = connect(mapStateToProps, null)(HeatmapComponent);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Row, Col } from 'react-bootstrap';\nimport { SocketFail } from './socket/SocketFail';\nimport { TreeLayout } from './treestructure/TreeLayout';\nimport { ImageInput } from './viewers/ImageInput';\nimport { Heatmap } from './viewers/Heatmap';\n\nconst MainViewComponent = ({ data }) => {\n  return data ? (\n    <>\n      <Col sm=\"auto\">\n        <TreeLayout data={data} />\n      </Col>\n      <Col>\n        <Row>\n          <Col md={6}>\n            <ImageInput />\n          </Col>\n          <Col md={6}>\n            <Heatmap />\n          </Col>\n        </Row>\n      </Col>\n    </>\n  ) : (\n    <SocketFail />\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    data: state.socket.data,\n  };\n};\n\nexport const MainView = connect(mapStateToProps, null)(MainViewComponent);\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { Canvas } from \"react-three-fiber\";\n\nconst Container = styled.div`\n  height: 75vh;\n  min-height: 300px;\n  width: 100%;\n  background-color: #000;\n  & canvas:focus {\n    outline-width: 0px;\n  }\n`;\n\nexport const CanvasContainer = ({ children, measure, ...props }) => {\n  return (\n    <Container ref={measure} {...props}>\n      <Canvas>\n        {children}\n      </Canvas>\n    </Container>\n  );\n};\n","import React, { useRef, useEffect, useMemo } from 'react';\nimport useMeasure from 'react-use-measure';\nimport { useFrame } from 'react-three-fiber';\nimport { DoubleSide } from 'three';\nimport { ResizeObserver } from '@juggle/resize-observer';\nimport { connect } from 'react-redux';\nimport { send_event } from '../sagas/socketSaga';\nimport { serverEvents } from '../constants/serverEvents';\nimport { CanvasContainer } from './CanvasContainer';\nimport { Button } from '../components/Button';\nimport { Col } from 'react-bootstrap';\nimport { OrbitControls } from 'drei';\nimport { urlToArray } from '../helpers/numpyReader';\n\nconst mapDispatch = { send_event };\n\nconst mapStateToProps = (state) => ({\n  data: state.socket.lossLandscape,\n});\n\nconst Mesh = ({ data }) => {\n  const meshRef = useRef();\n  const planeRef = useRef();\n\n  const shaderData = useMemo(() => {\n    const vertexShader = /* glsl */ `\n  varying vec3 pos;\n\n  void main() {\n    pos = position;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n  }\n`;\n\n    const fragmentShader = /* glsl */ `\n  varying vec3 pos;\n\n  void main() {\n    vec4 col = vec4(0.0, 0.1, 0.3, 1.0);\n    col.r = max(0.0, (1.0 - pos.z/2.0)) * (1.0 - distance(pos.xy, vec2(0.0))/10.0);\n    gl_FragColor = col;\n  }\n`;\n\n    const uniforms = {\n      // u_maxz: { value: 1 },\n    };\n\n    return { vertexShader, fragmentShader, uniforms };\n  }, []);\n\n  useEffect(() => {\n    if (!data) return;\n    const plane = planeRef.current;\n    const max_z = data.max_z ?? 1;\n    urlToArray(data).then(({ data, shape }) => {\n      data.forEach((o, i) => {\n        plane.vertices[i].z = o / max_z;\n      });\n      plane.verticesNeedUpdate = true;\n    });\n    // shaderData.uniforms.u_maxz.value = max_z;\n  }, [data, shaderData]);\n\n  // useFrame(() => (meshRef.current.rotation.z += 0.005));\n\n  return (\n    <mesh ref={meshRef} rotation-x={-Math.PI / 2.1} position-y={-1.5}>\n      <planeGeometry ref={planeRef} attach=\"geometry\" args={[5, 5, 100, 100]} />\n      <shaderMaterial\n        attach=\"material\"\n        {...shaderData}\n        side={DoubleSide}\n        // wireframe\n      />\n      {/* <meshNormalMaterial\n        attach=\"material\"\n        // {...shaderData}\n        side={DoubleSide}\n        // wireframe\n      /> */}\n      <OrbitControls />\n    </mesh>\n  );\n};\n\nexport const LossLandscapeComponent = ({ data, send_event }) => {\n  const [ref, bounds] = useMeasure({ polyfill: ResizeObserver });\n\n  return (\n    <Col>\n      <CanvasContainer measure={ref}>\n        <ambientLight />\n        <pointLight position={[10, 10, 10]} />\n        <Mesh bounds={bounds} data={data} />\n      </CanvasContainer>\n      <div className=\"text-right mt-2 mr-2\">\n        <Button\n          onClick={() => send_event({ event: serverEvents.GET_LOSS_LANDSCAPE })}\n        >\n          Load landscape\n        </Button>\n      </div>\n    </Col>\n  );\n};\n\nexport const LossLandscape = connect(\n  mapStateToProps,\n  mapDispatch\n)(LossLandscapeComponent);\n","import React from 'react';\nimport {\n  HashRouter,\n  Route,\n  Switch,\n  useLocation\n} from 'react-router-dom';\nimport { Container, Row, Col } from 'react-bootstrap';\nimport { Footer } from './Footer';\nimport { SocketStatus } from './socket/SocketStatus';\nimport { Navigation } from './Navigation';\nimport { MainView } from './MainView';\nimport { LossLandscape } from './viewers/LossLandscape';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './App.css';\n\nconst AppContent = () => {\n  const location = useLocation();\n  const isHome = location.pathname === '/';\n\n  return (\n    <Container className=\"app-container\" fluid=\"xl\">\n      <header>\n        <Navigation />\n        { isHome && <h1 className=\"tw-mt-4 tw-mb-4 tw-text-gray-900\">FastExplorer</h1>}\n      </header>\n\n      <main>\n        <Row>\n          <Col>\n            <SocketStatus />\n          </Col>\n        </Row>\n        <Row className=\"justify-content-md-center\">\n          <Switch>\n            <Route exact path={`/`}>\n              <MainView />\n            </Route>\n            <Route path={`/loss_landscape`}>\n              <LossLandscape />\n            </Route>\n          </Switch>\n        </Row>\n      </main>\n\n      <Footer url=\"fastexplorer-js\" />\n    </Container>\n  );\n};\n\nexport const App = () => (\n  <HashRouter basename='/'>\n    <AppContent />\n  </HashRouter>\n);\n","import { combineReducers } from '@reduxjs/toolkit';\nimport { socketReducer } from './socketReducer';\n\nexport const rootReducer = combineReducers({ socket: socketReducer });","import { all, fork } from 'redux-saga/effects';\nimport { watchSocket } from './socketSaga';\n\nexport function* rootSaga() {\n  yield fork(watchSocket)\n  yield all([\n  ]);\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\nimport { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\nimport createSagaMiddleWare from 'redux-saga';\nimport { Provider } from 'react-redux';\nimport { rootReducer } from './reducers/rootReducer';\nimport { rootSaga } from './sagas/rootSaga';\n\nconst sagaMiddleware = createSagaMiddleWare();\nconst middleware = [...getDefaultMiddleware({ thunk: false }), sagaMiddleware];\nconst store = configureStore({ reducer: rootReducer, middleware });\nsagaMiddleware.run(rootSaga);\n\n// const store = configureStore({ reducer: rootReducer });\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}